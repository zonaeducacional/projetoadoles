<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plataforma de Debate e Publicação</title>
    
    <!-- Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Estilo base para a fonte e tema escuro */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* gray-900 */
            color: #d1d5db; /* gray-300 */
        }
        /* Esconde a barra de rolagem do webkit */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Esconde a barra de rolagem para IE, Edge e Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        /* Animação de fade-in para as páginas */
        .page {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Estilo para o link ativo no menu */
        .nav-link.active {
            background-color: #374151; /* gray-700 */
            color: #ffffff;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="relative min-h-screen md:flex">
        <!-- Overlay para o menu mobile -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-20 hidden md:hidden"></div>

        <!-- Header para Mobile -->
        <div class="bg-gray-800 text-gray-100 flex justify-between md:hidden fixed top-0 left-0 right-0 z-40">
            <a href="#" class="block p-4 text-white font-bold">Projeto Adolescência</a>
            <button id="hamburger-button" class="p-4 focus:outline-none focus:bg-gray-700">
                <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </div>

        <!-- Sidebar de Navegação -->
        <aside id="sidebar" class="bg-gray-800 text-gray-200 w-64 space-y-4 p-4 flex flex-col fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out z-30">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="bg-indigo-600 p-2 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 22h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v8"></path><path d="M6 18H4a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h2"></path><path d="M18 18h2a2 2 0 0 0 2-2v-2a2 2 0 0 0-2-2h-2"></path><path d="M6 6h12"></path><path d="M6 10h12"></path><path d="M6 14h6"></path></svg>
                    </div>
                    <h1 class="text-xl font-bold">Redação & Debate</h1>
                </div>
                <button id="close-sidebar-button" class="md:hidden p-2 focus:outline-none">
                     <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <nav class="flex-1 flex flex-col space-y-2">
                <a href="#" id="nav-dashboard" class="nav-link active flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    Painel Principal- Projeto Didático Adolescência em Debate
                </a>
                <a href="#" id="nav-laboratorio" class="nav-link flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="m10.4 12.6-2.8 2.8"></path><path d="M10.4 15.4 7.6 18"></path><path d="m14 16-3 3"></path></svg>
                    Laboratório de Escrita
                </a>
                <a href="#" id="nav-mural" class="nav-link flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="3" x2="21" y1="9" y2="9"></line><line x1="9" x2="9" y1="21" y2="9"></line></svg>
                    Mural de Publicações
                </a>
            </nav>
            <div class="mt-auto pt-4 border-t border-gray-700">
                <p class="text-xs text-gray-400">Escola Januário E. de Lima - LPT</p>
            </div>
        </aside>

        <!-- Conteúdo Principal -->
        <main class="flex-1 p-6 lg:p-8 overflow-y-auto no-scrollbar pt-20 md:pt-6">
            
            <div id="dashboard-page" class="page">
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-6">Painel Principal</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <a href="https://www.kialo-edu.com/p/c6ff308e-959a-43fa-9269-4bae8c22676f/522316" target="_blank" class="bg-gray-800 p-6 rounded-xl hover:bg-gray-700 hover:scale-105 transition-all duration-300 transform">
                        <div class="flex items-center gap-4 mb-4">
                            <div class="bg-blue-500 p-3 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M17 6.1H3"></path><path d="M21 12.1H3"></path><path d="M15.1 18H3"></path></svg>
                            </div>
                            <h3 class="text-xl font-bold text-white">Fórum de Debates</h3>
                        </div>
                        <p class="text-gray-400">Participe de discussões estruturadas sobre temas atuais e relevantes para a redação. (Link externo)</p>
                    </a>

                    <div id="card-laboratorio" class="bg-gray-800 p-6 rounded-xl hover:bg-gray-700 hover:scale-105 transition-all duration-300 transform cursor-pointer">
                        <div class="flex items-center gap-4 mb-4">
                             <div class="bg-green-500 p-3 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><path d="M12 22h6a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v8"></path><path d="M6 18H4a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h2"></path><path d="m16 14-4 4 4 4"></path><path d="m18 8-4-4-4 4"></path></svg>
                            </div>
                            <h3 class="text-xl font-bold text-white">Laboratório de Escrita</h3>
                        </div>
                        <p class="text-gray-400">Acesse materiais, aprenda a estrutura do artigo de opinião e publique seus textos.</p>
                    </div>

                    <div id="card-mural" class="bg-gray-800 p-6 rounded-xl hover:bg-gray-700 hover:scale-105 transition-all duration-300 transform cursor-pointer">
                        <div class="flex items-center gap-4 mb-4">
                             <div class="bg-purple-500 p-3 rounded-lg">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-white"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect><line x1="3" x2="21" y1="9" y2="9"></line><line x1="9" x2="9" y1="21" y2="9"></line></svg>
                            </div>
                            <h3 class="text-xl font-bold text-white">Mural de Publicações</h3>
                        </div>
                        <p class="text-gray-400">Veja os artigos de opinião publicados por outros estudantes e compartilhe o seu.</p>
                    </div>
                </div>
            </div>

            <div id="laboratorio-page" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-6">Laboratório de Escrita</h2>
                <div class="space-y-8">
                    <div class="bg-gray-800 p-4 md:p-6 rounded-xl">
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-4">Como Escrever um Artigo de Opinião para o ENEM</h3>
                        <div class="space-y-4 text-gray-300">
                            <p>O artigo de opinião é um texto dissertativo-argumentativo onde você expõe um ponto de vista sobre um determinado tema, sustentado por argumentos sólidos. A estrutura clássica é a chave para uma boa nota.</p>
                            <div>
                                <h4 class="font-semibold text-lg text-white mb-2">1. Introdução (1º Parágrafo)</h4>
                                <p>Apresente o tema e, de forma clara, a sua tese (seu ponto de vista). Você pode contextualizar o assunto com um dado histórico, uma citação ou uma notícia para engajar o leitor desde o início.</p>
                            </div>
                            <div>
                                <h4 class="font-semibold text-lg text-white mb-2">2. Desenvolvimento (2º e 3º Parágrafos)</h4>
                                <p>É aqui que você defende sua tese. Cada parágrafo deve desenvolver um argumento principal. Use dados estatísticos, fatos históricos, citações de especialistas e exemplos concretos para dar força aos seus argumentos. Lembre-se de conectar as ideias de forma coesa.</p>
                            </div>
                             <div>
                                <h4 class="font-semibold text-lg text-white mb-2">3. Conclusão (4º Parágrafo)</h4>
                                <p>Retome sua tese, sintetize os argumentos e, no caso do ENEM, apresente uma Proposta de Intervenção Social (PIS). A PIS deve ser detalhada, indicando: <strong>Agente</strong> (quem vai fazer?), <strong>Ação</strong> (o que será feito?), <strong>Meio/Modo</strong> (como será feito?), <strong>Finalidade</strong> (para quê?) e um <strong>Detalhamento</strong> de um desses elementos.</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gray-800 p-4 md:p-6 rounded-xl">
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-4">1. Escreva seu Artigo</h3>
                        <p class="mb-4 text-gray-400">Clique no botão abaixo para abrir o editor de texto online. Lá você poderá escrever seu artigo de forma simples e rápida.</p>
                        <a href="https://telegra.ph/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg transition-colors mb-8">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg>
                            Começar a Escrever no Telegraph
                        </a>
                        
                        <h3 class="text-xl md:text-2xl font-bold text-white mb-4">2. Publique seu Artigo no Mural</h3>
                        <p class="mb-4 text-gray-400">Depois de escrever, o Telegraph vai gerar uma página para seu artigo. Copie o link (URL) dessa página e cole no campo abaixo, junto com as outras informações.</p>

                        <form id="article-form" class="space-y-4">
                            <div>
                                <label for="article-title" class="block text-sm font-medium text-gray-300 mb-1">Título do Artigo</label>
                                <input type="text" id="article-title" name="title" required class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="author-name" class="block text-sm font-medium text-gray-300 mb-1">Seu Nome (Autor)</label>
                                <input type="text" id="author-name" name="author" required class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <div>
                                <label for="article-url" class="block text-sm font-medium text-gray-300 mb-1">Link do seu Artigo (do Telegraph)</label>
                                <input type="url" id="article-url" name="url" required placeholder="https://telegra.ph/seu-artigo-12-34" class="w-full bg-gray-700 border border-gray-600 text-white rounded-lg p-2.5 focus:ring-indigo-500 focus:border-indigo-500">
                            </div>
                            <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg transition-colors">
                                Publicar no Mural
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div id="mural-page" class="page hidden">
                <h2 class="text-2xl md:text-3xl font-bold text-white mb-6">Mural de Publicações</h2>
                <div id="articles-container" class="space-y-4">
                    <p id="loading-message" class="text-gray-400">Carregando publicações...</p>
                </div>
            </div>
        </main>
    </div>
    
    <div id="notification-modal" class="hidden fixed top-20 md:top-5 right-5 bg-green-500 text-white py-3 px-5 rounded-lg shadow-lg z-50 animate-pulse">
        <p>Publicação realizada com sucesso!</p>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- CONFIGURAÇÃO JSONBin ---
            const JSONBIN_API_KEY = '$2a$10$dl/5wg6j78uEQNgmToucuuah.Ez9UyMql8Un4Cpmjm4ian4j9o.7e';
            const JSONBIN_BIN_ID = '68699fe98a456b7966bbfe93';
            
            const JSONBIN_URL = `https://api.jsonbin.io/v3/b/${JSONBIN_BIN_ID}`;
            const JSONBIN_HEADERS = {
                'Content-Type': 'application/json',
                'X-Master-Key': JSONBIN_API_KEY
            };

            // --- ELEMENTOS DA UI ---
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const hamburgerButton = document.getElementById('hamburger-button');
            const closeSidebarButton = document.getElementById('close-sidebar-button');
            const pages = {
                dashboard: document.getElementById('dashboard-page'),
                laboratorio: document.getElementById('laboratorio-page'),
                mural: document.getElementById('mural-page')
            };
            const navLinks = {
                dashboard: document.getElementById('nav-dashboard'),
                laboratorio: document.getElementById('nav-laboratorio'),
                mural: document.getElementById('nav-mural')
            };
            const cardLinks = {
                laboratorio: document.getElementById('card-laboratorio'),
                mural: document.getElementById('card-mural')
            };
            const articleForm = document.getElementById('article-form');
            const articlesContainer = document.getElementById('articles-container');
            const notificationModal = document.getElementById('notification-modal');

            // --- LÓGICA DO MENU RESPONSIVO ---
            function toggleSidebar() {
                sidebar.classList.toggle('-translate-x-full');
                sidebarOverlay.classList.toggle('hidden');
            }

            hamburgerButton.addEventListener('click', toggleSidebar);
            closeSidebarButton.addEventListener('click', toggleSidebar);
            sidebarOverlay.addEventListener('click', toggleSidebar);

            // --- NAVEGAÇÃO ENTRE PÁGINAS ---
            function showPage(pageName) {
                Object.values(pages).forEach(page => page.classList.add('hidden'));
                Object.values(navLinks).forEach(link => link.classList.remove('active'));

                if (pages[pageName] && navLinks[pageName]) {
                    pages[pageName].classList.remove('hidden');
                    navLinks[pageName].classList.add('active');
                }
                // Fecha o menu mobile ao navegar
                if (window.innerWidth < 768) { 
                    toggleSidebar();
                }
            }
            
            Object.keys(navLinks).forEach(key => {
                navLinks[key].addEventListener('click', (e) => {
                    e.preventDefault();
                    if (key === 'mural') loadArticles();
                    showPage(key);
                });
            });

            cardLinks.laboratorio.addEventListener('click', () => showPage('laboratorio'));
            cardLinks.mural.addEventListener('click', () => {
                showPage('mural');
                loadArticles();
            });

            // --- LÓGICA DO JSONBin (MURAL) ---
            function renderArticles(articles) {
                articlesContainer.innerHTML = '';
                if (!articles || articles.length === 0) {
                    articlesContainer.innerHTML = '<p class="text-gray-400">Ainda não há publicações. Seja o primeiro a compartilhar seu artigo!</p>';
                    return;
                }

                const sortedArticles = articles.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

                sortedArticles.forEach(article => {
                    const articleElement = document.createElement('a');
                    articleElement.href = article.url;
                    articleElement.target = '_blank';
                    articleElement.rel = 'noopener noreferrer';
                    articleElement.className = 'block bg-gray-800 p-4 rounded-lg hover:bg-gray-700 transition-colors';

                    const titleElement = document.createElement('h4');
                    titleElement.textContent = article.title;
                    titleElement.className = 'text-lg font-bold text-indigo-400';

                    const authorElement = document.createElement('p');
                    authorElement.textContent = `Por: ${article.author}`;
                    authorElement.className = 'text-sm text-gray-400';
                    
                    const urlElement = document.createElement('p');
                    urlElement.textContent = article.url;
                    urlElement.className = 'text-xs text-gray-500 mt-2 truncate';

                    articleElement.appendChild(titleElement);
                    articleElement.appendChild(authorElement);
                    articleElement.appendChild(urlElement);
                    articlesContainer.appendChild(articleElement);
                });
            }

            async function loadArticles() {
                document.getElementById('loading-message').style.display = 'block';
                try {
                    const response = await fetch(`${JSONBIN_URL}/latest`, {
                        method: 'GET',
                        headers: { 'X-Master-Key': JSONBIN_API_KEY }
                    });
                    if (response.status === 404) {
                         renderArticles([]);
                         return;
                    }
                    if (!response.ok) throw new Error(`Erro de rede: ${response.statusText}`);
                    
                    const data = await response.json();
                    renderArticles(data.record);
                } catch (error) {
                    console.error("Erro ao carregar artigos do JSONBin:", error);
                    articlesContainer.innerHTML = '<p class="text-red-400">Ocorreu um erro ao carregar as publicações. Verifique se a API Key e o Bin ID estão corretos no código.</p>';
                } finally {
                    document.getElementById('loading-message').style.display = 'none';
                }
            }

            // --- LÓGICA DO FORMULÁRIO DE PUBLICAÇÃO ---
            articleForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const title = articleForm.title.value;
                const author = articleForm.author.value;
                const url = articleForm.url.value;
                const newArticle = { title, author, url, createdAt: new Date().toISOString() };

                const submitButton = articleForm.querySelector('button[type="submit"]');
                submitButton.disabled = true;
                submitButton.textContent = 'Publicando...';

                try {
                    const getResponse = await fetch(`${JSONBIN_URL}/latest`, { headers: { 'X-Master-Key': JSONBIN_API_KEY } });
                    let articles = [];
                    if (getResponse.ok) {
                        const currentData = await getResponse.json();
                        articles = Array.isArray(currentData.record) ? currentData.record : [];
                    } else if (getResponse.status !== 404) {
                        throw new Error('Não foi possível buscar os artigos existentes.');
                    }

                    articles.push(newArticle);

                    const putResponse = await fetch(JSONBIN_URL, {
                        method: 'PUT',
                        headers: JSONBIN_HEADERS,
                        body: JSON.stringify(articles)
                    });

                    if (!putResponse.ok) throw new Error('Não foi possível salvar o novo artigo.');

                    articleForm.reset();
                    showNotification();
                    showPage('mural');
                    renderArticles(articles);

                } catch (error) {
                    console.error("Erro ao publicar no JSONBin:", error);
                    alert("Ocorreu um erro ao publicar seu artigo: " + error.message);
                } finally {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Publicar no Mural';
                }
            });
            
            // --- FUNÇÕES AUXILIARES ---
            function showNotification() {
                notificationModal.classList.remove('hidden');
                setTimeout(() => {
                    notificationModal.classList.add('hidden');
                }, 3000);
            }

            // --- INICIALIZAÇÃO DA APLICAÇÃO ---
            showPage('dashboard');
            // Carrega os artigos na primeira vez que a página do mural é mostrada
            if (document.getElementById('mural-page').classList.contains('hidden') === false) {
                loadArticles();
            }
        });
    </script>
</body>
</html>
